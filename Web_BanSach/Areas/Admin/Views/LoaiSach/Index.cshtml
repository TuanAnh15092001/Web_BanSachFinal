@model IEnumerable<Web_BanSach.LOAISACH>

@{
    ViewBag.Title = "Quản lý Loại Sách";
    <link href="~/Areas/Css/IndexLoai.css" rel="stylesheet" />
}
<section class="admin-container">
    <!-- Header -->
    <div class="page-header">
        <h1 class="page-title">
            <i class="fa-solid fa-layer-group"></i>
            Quản lý Loại Sách
            <span class="badge-count">@Model.Count() loại</span>
        </h1>

        <a href="@Url.Action("ThemLoai", "LoaiSach", new { area = "Admin" })" class="btn-add">
            <i class="fa-solid fa-plus"></i>
            Thêm Loại Mới
        </a>
    </div>

    <!-- Table Card -->
    <div class="table-card">
        @if (Model.Any())
        {
            <table class="custom-table">
                <thead>
                    <tr>
                        <th style="width: 100px;">
                            <i class="fa-solid fa-hashtag" style="margin-right: 6px;"></i>Mã
                        </th>
                        <th>
                            <i class="fa-solid fa-bookmark" style="margin-right: 6px;"></i>Tên Loại
                        </th>
                        <th style="width: 120px; text-align: center;">
                            <i class="fa-solid fa-gear" style="margin-right: 6px;"></i>Thao tác
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>
                                <span class="category-id">@item.MALOAI</span>
                            </td>
                            <td>
                                <span class="category-name">
                                    <i class="fa-solid fa-tag"></i>
                                    @item.TENLOAI
                                </span>
                            </td>
                            <td>
                                <div class="action-buttons">
                                    <a href="@Url.Action("ViewEdit", new { Loaisach_id = item.MALOAI })"
                                       class="btn-action btn-edit"
                                       title="Chỉnh sửa">
                                        <i class="fa-solid fa-pen-to-square"></i>
                                    </a>
                                    <button type="button"
                                            class="btn-action btn-delete"
                                            title="Xóa"
                                            onclick="showDeleteModal('@item.MALOAI', '@item.TENLOAI')">
                                        <i class="fa-solid fa-trash-can"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <div class="empty-state">
                <i class="fa-solid fa-folder-open"></i>
                <p>Chưa có loại sách nào. Hãy thêm loại sách mới!</p>
            </div>
        }
    </div>
</section>

<!-- ==================== DELETE CONFIRMATION MODAL ==================== -->
<div class="modal-overlay" id="deleteModal">
    <div class="modal-box">
        <div class="modal-header">
            <div class="modal-icon">
                <i class="fa-solid fa-trash-can"></i>
            </div>
        </div>
        <div class="modal-body">
            <p>Bạn có chắc chắn muốn xóa loại sách này?</p>
            <div class="modal-item-name" id="deleteItemName">
                <!-- Tên loại sách sẽ được hiển thị ở đây -->
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="modal-btn modal-btn-cancel" onclick="hideDeleteModal()">
                <i class="fa-solid fa-xmark"></i>
                Hủy bỏ
            </button>
            <a href="#" class="modal-btn modal-btn-confirm" id="confirmDeleteBtn">
                <i class="fa-solid fa-trash-can"></i>
                Đi tới
            </a>
        </div>
    </div>
</div>

<script>
    // Hiển thị modal xóa
    function showDeleteModal(id, name) {
        const modal = document.getElementById('deleteModal');
        const itemName = document.getElementById('deleteItemName');
        const confirmBtn = document.getElementById('confirmDeleteBtn');

        // Hiển thị tên loại sách
        itemName.textContent = name;

        // Cập nhật link xóa
        confirmBtn.href = '@Url.Action("ViewDelete")' + '?Loaisach_id=' + id;

        // Hiển thị modal
        modal.classList.add('active');

        // Ngăn scroll trang
        document.body.style.overflow = 'hidden';
    }

    // Ẩn modal xóa
    function hideDeleteModal() {
        const modal = document.getElementById('deleteModal');
        modal.classList.remove('active');

        // Cho phép scroll lại
        document.body.style.overflow = 'auto';
    }

    // Đóng modal khi click bên ngoài
    document.getElementById('deleteModal').addEventListener('click', function(e) {
        if (e.target === this) {
            hideDeleteModal();
        }
    });
</script>