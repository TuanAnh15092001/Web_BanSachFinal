@model BANGSACH
@{
    ViewBag.Title = "Chi tiết sách";
    Layout = "~/Views/Shared/_LayoutSach.cshtml";
    <link href="~/Content/Css/SCTS1.css" rel="stylesheet" />
    var lienquan = (List<BANGSACH>)ViewBag.LQ;
    var nxb = (List<BANGSACH>)ViewBag.NXB;
}

<section class="product-detail-section">
    <div class="detail-container">

        <!-- Product Detail Card -->
        <div class="product-detail-card fade-up">
            <!-- Image Section -->
            <div class="product-image-section">
                <div class="image-wrapper">
                    <img src="~/Content/HinhAnh/@Model.ANHBIA" alt="@Model.TENSACH" />
                </div>
            </div>

            <!-- Info Section -->
            <div class="product-info-section slide-in">
                <div class="price-section">
                    <div>
                        <span class="current-price">@String.Format("{0:#,##0}", Model.GIABAN) VNĐ</span>
                        @*<span class="original-price">@String.Format("{0:#,##0}", Model.GIABAN * 1.15m) VNĐ</span>*@
                    </div>
                </div>

                <div class="product-description">
                    @Model.NOIDUNG
                </div>

                <div class="action-buttons">
                    <a href="@Url.Action("ThemGio", "Cart", new { masach = Model.MASACH, url = Request.RawUrl })"
                       class="btn-add-cart">
                        🛒 Thêm vào giỏ hàng
                    </a>
                    <a href="@Url.Action("Index", "Sach")" class="btn-back">
                        ← Quay lại
                    </a>
                </div>
            </div>
        </div>

        <!-- Related Products -->
        <div class="related-section fade-up">
            <div class="section-header">
                <h2 class="section-title">Sản phẩm liên quan</h2>
            </div>

            @if (ViewBag.Messagelq != null)
            {
                <div class="custom-alert">
                    <span>ℹ️</span>
                    @ViewBag.Messagelq
                </div>
            }

            <div class="products-grid">
                @foreach (var item in lienquan)
                {
                    <article class="product-card">
                        <a href="@Url.Action("ChiTietSach", "Sach", new { masach = item.MASACH })">
                            <div class="card-image">
                                <img src="~/Content/HinhAnh/@item.ANHBIA" alt="@item.TENSACH" />
                                <div class="card-overlay">
                                </div>
                            </div>
                            <div class="card-content">
                                <h3 class="card-title">@item.TENSACH</h3>
                                <p class="card-price">@String.Format("{0:#,##0}", item.GIABAN) VNĐ</p>
                            </div>
                        </a>
                    </article>
                }
            </div>
        </div>

        <!-- Same Publisher Products -->
        <div class="related-section fade-up">
            <div class="section-header">
                <h2 class="section-title">Cùng nhà xuất bản</h2>
            </div>

            @if (ViewBag.Messagenxb != null)
            {
                <div class="custom-alert">
                    <span>ℹ️</span>
                    @ViewBag.Messagenxb
                </div>
            }

            <div class="products-grid">
                @foreach (var item in nxb)
                {
                    <article class="product-card">
                        <a href="@Url.Action("ChiTietSach", "Sach", new { masach = item.MASACH })">
                            <div class="card-image">
                                <img src="~/Content/HinhAnh/@item.ANHBIA" alt="@item.TENSACH" />
                                <div class="card-overlay">
                                </div>
                            </div>
                            <div class="card-content">
                                <h3 class="card-title">@item.TENSACH</h3>
                                <p class="card-price">@String.Format("{0:#,##0}", item.GIABAN) VNĐ</p>
                            </div>
                        </a>
                    </article>
                }
            </div>
        </div>

    </div>
</section>

<script>
    function increaseQty() {
        var input = document.getElementById('quantity');
        input.value = parseInt(input.value) + 1;
    }

    function decreaseQty() {
        var input = document.getElementById('quantity');
        if (parseInt(input.value) > 1) {
            input.value = parseInt(input.value) - 1;
        }
    }
</script>